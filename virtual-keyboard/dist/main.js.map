{"version":3,"file":"main.js","mappings":"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","sources":["webpack://virtual-keyboard/./src/Keyboard.js","webpack://virtual-keyboard/./src/index.js"],"sourcesContent":["export default class Keyboard {\n  constructor(arr) {\n    this.arr = arr;\n    this.hotkeys = ['CapsLock', 'ShiftLeft', 'ShiftRight', 'Enter', 'Backspace', 'Delete', 'Tab', 'AltLeft', 'AltRight', 'ControlLeft', 'ControlRight', 'MetaLeft'];\n    this.textfield = null;\n    this.status = {\n      isCaps: false,\n      isShiftL: false,\n      isShiftR: false,\n      lang: 'eng',\n      case: 'down',\n    };\n    this.prevElem = {\n      elem: null,\n      evt: null,\n      code: null,\n      charcode: null,\n    };\n    this.currElem = {\n      elem: null,\n      evt: null,\n      code: null,\n      charcode: null,\n    };\n  }\n\n  createKeyboardRows() {\n    const keyboardParent = document.querySelector('.virtual-keyboard__keyboard');\n    const rows = Object.entries(this.arr);\n    return rows.forEach((elem) => {\n      const rowCont = document.createElement('div');\n      rowCont.className = `virtual-keyboard__row ${elem[0]}`;\n      keyboardParent.append(rowCont);\n      rowCont.innerHTML += elem[1].map((el) => `\n        <button class=\"virtual-keyboard__key\" data-elem-code=\"${el.className}\">\n            <span class=\"virtual-keyboard__text eng down\">${el.eng.caseDown}</span>\n            <span class=\"virtual-keyboard__text virtual-keyboard__text--hidden eng up\">${el.eng.caseUp}</span>\n            <span class=\"virtual-keyboard__text virtual-keyboard__text--hidden rus down\">${el.rus.caseDown}</span>\n            <span class=\"virtual-keyboard__text virtual-keyboard__text--hidden rus up\">${el.rus.caseUp}</span>\n        </button>\n        `).join('');\n    });\n  }\n\n  addActiveClass() {\n    if (this.currElem.elem) this.currElem.elem.classList.add('virtual-keyboard__key--active');\n  }\n\n  removeActiveClass() {\n    if (this.currElem.elem) {\n      if (this.prevElem.elem) {\n        if (!this.prevElem.elem.classList.contains('virtual-keyboard__key--active') && !(['CapsLock', 'ShiftLeft', 'ShiftRight'].includes(this.prevElem.code))) {\n          this.prevElem.elem.classList.remove('virtual-keyboard__key--active');\n        }\n      }\n      this.currElem.elem.classList.remove('virtual-keyboard__key--active');\n    }\n  }\n\n  changeLanguage() {\n    const showCurrentLang = function myFunc() {\n      const keys = Array.from(document.querySelectorAll(`.${this.status.lang}`));\n      keys.forEach((elem) => {\n        if (elem.classList.contains(`${this.status.case}`)) {\n          elem.classList.toggle('virtual-keyboard__text--hidden');\n        }\n      });\n    }.bind(this);\n    showCurrentLang();\n    if (this.status.lang === 'rus') this.status.lang = 'eng';\n    else this.status.lang = 'rus';\n    localStorage.setItem('lang', this.status.lang);\n    showCurrentLang();\n  }\n\n  changeCase() {\n    const keys = Array.from(document.querySelectorAll(`button > .${this.status.lang}`));\n    keys.forEach((elem) => {\n      if (!elem.classList.contains('virtual-keyboard__text--hidden')) {\n        elem.classList.add('virtual-keyboard__text--hidden');\n      }\n      if ((this.isShiftL === true || this.isShiftR === true) && this.isCaps === true) {\n        this.status.case = 'down';\n      } else if (this.isCaps === true) {\n        this.status.case = 'up';\n      } else if (this.isShiftL === true || this.isShiftR === true) {\n        this.status.case = 'up';\n      } else {\n        this.status.case = 'down';\n      }\n      if (elem.classList.contains(`${this.status.case}`)) {\n        elem.classList.remove('virtual-keyboard__text--hidden');\n      }\n    });\n  }\n\n  keydownHandler(evt) {\n    evt.preventDefault();\n    this.currElem.evt = evt;\n    this.currElem.code = evt.code;\n    this.currElem.elem = document.querySelector(`[data-elem-code=\"${evt.code}\"`);\n    if (this.currElem.elem) {\n      this.currElem.charcode = this.currElem.elem.querySelector(':not(.virtual-keyboard__text--hidden)')\n        .textContent;\n    }\n    this.createShortcuts();\n    if (this.currElem.code === 'MetaLeft') {\n      this.addActiveClass();\n      setTimeout(this.removeActiveClass.bind(this), 300);\n    } else if (this.currElem.code !== 'CapsLock' && this.currElem.code !== 'ShiftLeft' && this.currElem.code !== 'ShiftRight') {\n      this.addActiveClass();\n    }\n  }\n\n  keyupHandler(evt) {\n    const upElem = document.querySelector(`[data-elem-code=\"${evt.code}\"`);\n    if (upElem) {\n      this.currElem.elem = upElem;\n      if (evt.code !== 'CapsLock') this.removeActiveClass();\n      if (evt.code === 'ShiftLeft') {\n        this.isShiftL = false;\n        this.removeActiveClass();\n        this.changeCase();\n      } else if (evt.code === 'ShiftRight') {\n        this.isShiftR = false;\n        this.removeActiveClass();\n        this.changeCase();\n      }\n    }\n  }\n\n  mouseDownHandler(evt) {\n    if (evt.target.tagName === 'SPAN') {\n      this.currElem.evt = evt;\n      const parent = evt.target.closest('button');\n      this.currElem.elem = parent;\n      const code = this.currElem.elem.dataset.elemCode;\n      this.currElem.code = code;\n      this.currElem.charcode = evt.target.textContent;\n      this.createShortcuts();\n      if (this.currElem.code !== 'CapsLock') {\n        this.addActiveClass();\n      }\n      this.prevElem = { ...this.currElem };\n      evt.preventDefault();\n    }\n  }\n\n  mouseUpHandler(evt) {\n    this.currElem.evt = evt;\n    if (evt.target.tagName === 'SPAN') {\n      const parent = evt.target.closest('button');\n      this.currElem.elem = parent;\n      if (this.currElem.elem && this.currElem.elem.classList.contains('virtual-keyboard__key')) {\n        const code = this.currElem.elem.dataset.elemCode;\n        this.currElem.code = code;\n      } else {\n        this.currElem = { ...this.prevElem };\n      }\n      if (this.currElem.code !== 'CapsLock') {\n        this.removeActiveClass();\n        if (this.isShiftR === true && this.currElem.code === 'ShiftRight') {\n          this.isShiftR = false;\n          this.changeCase();\n        }\n        if (this.isShiftL === true && this.currElem.code === 'ShiftLeft') {\n          this.isShiftL = false;\n          this.changeCase();\n        }\n      }\n    }\n  }\n\n  createShortcuts() {\n    this.textfield = document.querySelector('.virtual-keyboard__input-field');\n    let val = this.textfield.value;\n    const start = this.textfield.selectionStart;\n    const addTextarea = function func() {\n      if (start >= 0 && start <= val.length) {\n        this.textfield.value = val.slice(0, start)\n      + this.currElem.charcode + val.slice(start, this.textfield.length);\n        this.textfield.selectionStart += this.currElem.charcode.length;\n        this.textfield.selectionEnd = start + this.currElem.charcode.length;\n      } else { this.textfield.value += this.currElem.charcode; }\n    }.bind(this);\n    if (this.hotkeys.includes(this.currElem.code)) {\n      switch (this.currElem.code) {\n        case 'CapsLock':\n          if (this.isCaps && !this.currElem.evt.repeat) {\n            this.removeActiveClass();\n            this.isCaps = false;\n            this.status.case = 'down';\n          } else {\n            this.addActiveClass();\n            this.isCaps = true;\n            this.status.case = 'up';\n          }\n          this.changeCase();\n          break;\n        case 'ShiftRight':\n          if (!this.isShiftR || !this.isShiftL) {\n            this.addActiveClass();\n            this.isShiftR = true;\n            this.changeCase();\n          }\n          break;\n        case 'ShiftLeft':\n          if (!this.isShiftL || !this.isShiftR) {\n            this.addActiveClass();\n            this.isShiftL = true;\n            this.changeCase();\n          }\n          break;\n        case 'Backspace':\n          if (start >= 0 && start <= val.length) {\n            val = val.slice(0, start - 1)\n                + val.slice(start, val.length);\n            this.textfield.value = val;\n            this.textfield.selectionStart = start - 1;\n            this.textfield.selectionEnd = start - 1;\n          }\n          break;\n        case 'Delete':\n          if (start >= 0 && start <= val.length - 1) {\n            val = val.slice(0, start) + val.slice(start + 1, val.length);\n            this.textfield.value = val;\n            this.textfield.selectionStart = start;\n            this.selectionEnd = start;\n          }\n          break;\n        case 'Enter':\n          this.currElem.charcode = '\\n';\n          addTextarea();\n          break;\n        case 'Tab':\n          this.currElem.charcode = '    ';\n          addTextarea();\n          break;\n        default:\n          break;\n      }\n    } else {\n      addTextarea();\n    }\n    if (this.currElem.evt.ctrlKey && this.currElem.evt.altKey) this.changeLanguage();\n  }\n\n  addLang() {\n    if (localStorage.lang === 'rus') this.changeLanguage();\n  }\n\n  init() {\n    this.createKeyboardRows();\n    this.addLang();\n    document.addEventListener('keydown', this.keydownHandler.bind(this));\n    document.addEventListener('keyup', this.keyupHandler.bind(this));\n    document.addEventListener('mousedown', this.mouseDownHandler.bind(this));\n    document.addEventListener('mouseup', this.mouseUpHandler.bind(this));\n  }\n}\n","import './index.html';\nimport './styles/style.scss';\nimport keys from './keys.json';\nimport Keyboard from './Keyboard';\n\nfunction createPageTemplate() {\n  return `\n        <div class=\"container\">\n            <h1 class=\"virtual-keyboard__title\">RSS Virtual Keyboard</h1>\n            <textarea class=\"virtual-keyboard__input-field\" rows=\"7\" cols=\"50\"></textarea>\n            <div class=\"virtual-keyboard__keyboard\"></div>\n            <p class=\"virtual-keyboard__description\">Keyboard was created in Windows OS </br> Switch language: <b>control left</b> + <b>alt left</b></p>\n        </div>\n    `;\n}\n\nfunction createHTML() {\n  const body = document.querySelector('.page');\n  const main = document.createElement('main');\n  main.className = 'virtual-keyboard';\n  body.append(main);\n  main.innerHTML = createPageTemplate();\n  const a = new Keyboard(keys[0]).init();\n  return a;\n}\n\ncreateHTML();\n"],"names":["Keyboard","constructor","arr","this","hotkeys","textfield","status","isCaps","isShiftL","isShiftR","lang","case","prevElem","elem","evt","code","charcode","currElem","createKeyboardRows","keyboardParent","document","querySelector","Object","entries","forEach","rowCont","createElement","className","append","innerHTML","map","el","eng","caseDown","caseUp","rus","join","addActiveClass","classList","add","removeActiveClass","contains","includes","remove","changeLanguage","showCurrentLang","Array","from","querySelectorAll","toggle","bind","localStorage","setItem","changeCase","keydownHandler","preventDefault","textContent","createShortcuts","setTimeout","keyupHandler","upElem","mouseDownHandler","target","tagName","parent","closest","dataset","elemCode","mouseUpHandler","val","value","start","selectionStart","addTextarea","length","slice","selectionEnd","repeat","ctrlKey","altKey","addLang","init","addEventListener","body","main","createHTML"],"sourceRoot":""}