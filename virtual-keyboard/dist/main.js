(()=>{"use strict";const s=JSON.parse('[{"row-0":[{"className":"Backquote","eng":{"caps":"`","caseDown":"`","caseUp":"~","shiftCaps":"~"},"rus":{"caps":"Ё","caseDown":"ё","caseUp":"Ё","shiftCaps":"ё"}},{"className":"Digit1","eng":{"caps":"1","caseDown":"1","caseUp":"!","shiftCaps":"!"},"rus":{"caps":"1","caseDown":"1","caseUp":"!","shiftCaps":"!"}},{"className":"Digit2","eng":{"caps":"2","caseDown":"2","caseUp":"@","shiftCaps":"@"},"rus":{"caps":"2","caseDown":"2","caseUp":"\\"","shiftCaps":"\\""}},{"className":"Digit3","eng":{"caps":"3","caseDown":"3","caseUp":"#","shiftCaps":"#"},"rus":{"caps":"3","caseDown":"3","caseUp":"№","shiftCaps":"№"}},{"className":"Digit4","eng":{"caps":"4","caseDown":"4","caseUp":"$","shiftCaps":"$"},"rus":{"caps":"4","caseDown":"4","caseUp":";","shiftCaps":";"}},{"className":"Digit5","eng":{"caps":"5","caseDown":"5","caseUp":"%","shiftCaps":"%"},"rus":{"caps":"5","caseDown":"5","caseUp":"%","shiftCaps":"%"}},{"className":"Digit6","eng":{"caps":"6","caseDown":"6","caseUp":"^","shiftCaps":"^"},"rus":{"caps":"6","caseDown":"6","caseUp":":","shiftCaps":":"}},{"className":"Digit7","eng":{"caps":"7","caseDown":"7","caseUp":"&","shiftCaps":"&"},"rus":{"caps":"7","caseDown":"7","caseUp":"?","shiftCaps":"?"}},{"className":"Digit8","eng":{"caps":"8","caseDown":"8","caseUp":"*","shiftCaps":"*"},"rus":{"caps":"8","caseDown":"8","caseUp":"*","shiftCaps":"*"}},{"className":"Digit9","eng":{"caps":"9","caseDown":"9","caseUp":"(","shiftCaps":"("},"rus":{"caps":"9","caseDown":"9","caseUp":"(","shiftCaps":"("}},{"className":"Digit0","eng":{"caps":"0","caseDown":"0","caseUp":")","shiftCaps":")"},"rus":{"caps":"0","caseDown":"0","caseUp":")","shiftCaps":")"}},{"className":"Minus","eng":{"caps":"-","caseDown":"-","caseUp":"_","shiftCaps":"_"},"rus":{"caps":"-","caseDown":"-","caseUp":"_","shiftCaps":"_"}},{"className":"Equal","eng":{"caps":"=","caseDown":"=","caseUp":"+","shiftCaps":"+"},"rus":{"caps":"=","caseDown":"=","caseUp":"+","shiftCaps":"+"}},{"className":"Backspace","eng":{"caseDown":"Backspace","caseUp":"Backspace"},"rus":{"caseDown":"Backspace","caseUp":"Backspace"}}],"row-1":[{"className":"Tab","eng":{"caseDown":"Tab","caseUp":"Tab"},"rus":{"caseDown":"Tab","caseUp":"Tab"}},{"className":"KeyQ","eng":{"caseDown":"q","caseUp":"Q"},"rus":{"caseDown":"й","caseUp":"Й"}},{"className":"KeyW","eng":{"caseDown":"w","caseUp":"W"},"rus":{"caseDown":"ц","caseUp":"Ц"}},{"className":"KeyE","eng":{"caseDown":"e","caseUp":"E"},"rus":{"caseDown":"у","caseUp":"У"}},{"className":"KeyR","eng":{"caseDown":"r","caseUp":"R"},"rus":{"caseDown":"к","caseUp":"К"}},{"className":"KeyT","eng":{"caseDown":"t","caseUp":"T"},"rus":{"caseDown":"е","caseUp":"Е"}},{"className":"KeyY","eng":{"caseDown":"y","caseUp":"Y"},"rus":{"caseDown":"н","caseUp":"Н"}},{"className":"KeyU","eng":{"caseDown":"u","caseUp":"U"},"rus":{"caseDown":"г","caseUp":"Г"}},{"className":"KeyI","eng":{"caseDown":"i","caseUp":"I"},"rus":{"caseDown":"ш","caseUp":"Ш"}},{"className":"KeyO","eng":{"caseDown":"o","caseUp":"O"},"rus":{"caseDown":"щ","caseUp":"Щ"}},{"className":"KeyP","eng":{"caseDown":"p","caseUp":"P"},"rus":{"caseDown":"з","caseUp":"З"}},{"className":"BracketLeft","eng":{"caps":"[","caseDown":"[","caseUp":"{","shiftCaps":"{"},"rus":{"caps":"Х","caseDown":"х","caseUp":"Х","shiftCaps":"х"}},{"className":"BracketRight","eng":{"caps":"]","caseDown":"]","caseUp":"}","shiftCaps":"}"},"rus":{"caps":"Ъ","caseDown":"ъ","caseUp":"Ъ","shiftCaps":"ъ"}},{"className":"Backslash","eng":{"caps":"\\\\","caseDown":"\\\\","caseUp":"|","shiftCaps":"|"},"rus":{"caps":"\\\\","caseDown":"\\\\","caseUp":"/","shiftCaps":"/"}},{"className":"Delete","eng":{"caseDown":"Del","caseUp":"Del"},"rus":{"caseDown":"Del","caseUp":"Del"}}],"row-2":[{"className":"CapsLock","eng":{"caseDown":"CapsLock","caseUp":"CapsLock"},"rus":{"caseDown":"CapsLock","caseUp":"CapsLock"}},{"className":"KeyA","eng":{"caseDown":"a","caseUp":"A"},"rus":{"caseDown":"ф","caseUp":"Ф"}},{"className":"KeyS","eng":{"caseDown":"s","caseUp":"S"},"rus":{"caseDown":"ы","caseUp":"Ы"}},{"className":"KeyD","eng":{"caseDown":"d","caseUp":"D"},"rus":{"caseDown":"в","caseUp":"В"}},{"className":"KeyF","eng":{"caseDown":"f","caseUp":"F"},"rus":{"caseDown":"а","caseUp":"А"}},{"className":"KeyG","eng":{"caseDown":"g","caseUp":"G"},"rus":{"caseDown":"п","caseUp":"П"}},{"className":"KeyH","eng":{"caseDown":"h","caseUp":"H"},"rus":{"caseDown":"р","caseUp":"Р"}},{"className":"KeyJ","eng":{"caseDown":"j","caseUp":"J"},"rus":{"caseDown":"о","caseUp":"О"}},{"className":"KeyK","eng":{"caseDown":"k","caseUp":"K"},"rus":{"caseDown":"л","caseUp":"Л"}},{"className":"KeyL","eng":{"caseDown":"l","caseUp":"L"},"rus":{"caseDown":"д","caseUp":"Д"}},{"className":"Semicolon","eng":{"caps":";","caseDown":";","caseUp":":","shiftCaps":":"},"rus":{"caps":"Ж","caseDown":"ж","caseUp":"Ж","shiftCaps":"ж"}},{"className":"Quote","eng":{"caps":"\'","caseDown":"\'","caseUp":"\\"","shiftCaps":"\\""},"rus":{"caps":"Э","caseDown":"э","caseUp":"Э","shiftCaps":"э"}},{"className":"Enter","eng":{"caseDown":"Enter","caseUp":"Enter"},"rus":{"caseDown":"Enter","caseUp":"Enter"}}],"row-3":[{"className":"ShiftLeft","eng":{"caseDown":"Shift","caseUp":"Shift"},"rus":{"caseDown":"Shift","caseUp":"Shift"}},{"className":"KeyZ","eng":{"caseDown":"z","caseUp":"Z"},"rus":{"caseDown":"я","caseUp":"Я"}},{"className":"KeyX","eng":{"caseDown":"x","caseUp":"X"},"rus":{"caseDown":"ч","caseUp":"Ч"}},{"className":"KeyC","eng":{"caseDown":"c","caseUp":"C"},"rus":{"caseDown":"с","caseUp":"С"}},{"className":"KeyV","eng":{"caseDown":"v","caseUp":"V"},"rus":{"caseDown":"м","caseUp":"М"}},{"className":"KeyB","eng":{"caseDown":"b","caseUp":"B"},"rus":{"caseDown":"и","caseUp":"И"}},{"className":"KeyN","eng":{"caseDown":"n","caseUp":"N"},"rus":{"caseDown":"т","caseUp":"Т"}},{"className":"KeyM","eng":{"caseDown":"m","caseUp":"M"},"rus":{"caseDown":"ь","caseUp":"Ь"}},{"className":"Comma","eng":{"caps":",","caseDown":",","caseUp":"<","shiftCaps":"<"},"rus":{"caps":"Б","caseDown":"б","caseUp":"Б","shiftCaps":"б"}},{"className":"Period","eng":{"caps":".","caseDown":".","caseUp":">","shiftCaps":">"},"rus":{"caps":"Ю","caseDown":"ю","caseUp":"Ю","shiftCaps":"ю"}},{"className":"Slash","eng":{"caps":"/","caseDown":"/","caseUp":"?","shiftCaps":"?"},"rus":{"caps":".","caseDown":".","caseUp":",","shiftCaps":","}},{"className":"ArrowUp","eng":{"caseDown":"▲","caseUp":"▲"},"rus":{"caseDown":"▲","caseUp":"▲"}},{"className":"ShiftRight","eng":{"caseDown":"Shift","caseUp":"Shift"},"rus":{"caseDown":"Shift","caseUp":"Shift"}}],"row-4":[{"className":"ControlLeft","eng":{"caseDown":"Ctrl","caseUp":"Ctrl"},"rus":{"caseDown":"Ctrl","caseUp":"Ctrl"}},{"className":"MetaLeft","eng":{"caseDown":"Win","caseUp":"Win"},"rus":{"caseDown":"Win","caseUp":"Win"}},{"className":"AltLeft","eng":{"caseDown":"Alt","caseUp":"Alt"},"rus":{"caseDown":"Alt","caseUp":"Alt"}},{"className":"Space","eng":{"caseDown":" ","caseUp":" "},"rus":{"caseDown":" ","caseUp":" "}},{"className":"AltRight","eng":{"caseDown":"Alt","caseUp":"Alt"},"rus":{"caseDown":"Alt","caseUp":"Alt"}},{"className":"ArrowLeft","eng":{"caseDown":"◄","caseUp":"◄"},"rus":{"caseDown":"◄","caseUp":"◄"}},{"className":"ArrowDown","eng":{"caseDown":"▼","caseUp":"▼"},"rus":{"caseDown":"▼","caseUp":"▼"}},{"className":"ArrowRight","eng":{"caseDown":"►","caseUp":"►"},"rus":{"caseDown":"►","caseUp":"►"}},{"className":"ControlRight","eng":{"caseDown":"Ctrl","caseUp":"Ctrl"},"rus":{"caseDown":"Ctrl","caseUp":"Ctrl"}}]}]');class e{constructor(s){this.arr=s,this.hotkeys=["CapsLock","ShiftLeft","ShiftRight","Enter","Backspace","Delete","Tab","AltLeft","AltRight","ControlLeft","ControlRight","MetaLeft"],this.textfield=null,this.status={isCaps:!1,isShiftL:!1,isShiftR:!1,lang:"eng",case:"down"},this.prevElem={elem:null,evt:null,code:null,charcode:null},this.currElem={elem:null,evt:null,code:null,charcode:null}}createKeyboardRows(){const s=document.querySelector(".virtual-keyboard__keyboard");return Object.entries(this.arr).forEach((e=>{const a=document.createElement("div");a.className=`virtual-keyboard__row ${e[0]}`,s.append(a),a.innerHTML+=e[1].map((s=>`\n        <button class="virtual-keyboard__key" data-elem-code="${s.className}">\n            <span class="virtual-keyboard__text eng down">${s.eng.caseDown}</span>\n            <span class="virtual-keyboard__text virtual-keyboard__text--hidden eng up">${s.eng.caseUp}</span>\n            <span class="virtual-keyboard__text virtual-keyboard__text--hidden rus down">${s.rus.caseDown}</span>\n            <span class="virtual-keyboard__text virtual-keyboard__text--hidden rus up">${s.rus.caseUp}</span>\n        </button>\n        `)).join("")}))}addActiveClass(){this.currElem.elem&&this.currElem.elem.classList.add("virtual-keyboard__key--active")}removeActiveClass(){this.currElem.elem&&(this.prevElem.elem&&(this.prevElem.elem.classList.contains("virtual-keyboard__key--active")||["CapsLock","ShiftLeft","ShiftRight"].includes(this.prevElem.code)||this.prevElem.elem.classList.remove("virtual-keyboard__key--active")),this.currElem.elem.classList.remove("virtual-keyboard__key--active"))}changeLanguage(){const s=function(){Array.from(document.querySelectorAll(`.${this.status.lang}`)).forEach((s=>{s.classList.contains(`${this.status.case}`)&&s.classList.toggle("virtual-keyboard__text--hidden")}))}.bind(this);s(),"rus"===this.status.lang?this.status.lang="eng":this.status.lang="rus",localStorage.setItem("lang",this.status.lang),s()}changeCase(){Array.from(document.querySelectorAll(`button > .${this.status.lang}`)).forEach((s=>{s.classList.contains("virtual-keyboard__text--hidden")||s.classList.add("virtual-keyboard__text--hidden"),(!0===this.isShiftL||!0===this.isShiftR)&&!0===this.isCaps||!0!==this.isCaps&&!0!==this.isShiftL&&!0!==this.isShiftR?this.status.case="down":this.status.case="up",s.classList.contains(`${this.status.case}`)&&s.classList.remove("virtual-keyboard__text--hidden")}))}keydownHandler(s){s.preventDefault(),this.currElem.evt=s,this.currElem.code=s.code,this.currElem.elem=document.querySelector(`[data-elem-code="${s.code}"`),this.currElem.elem&&(this.currElem.charcode=this.currElem.elem.querySelector(":not(.virtual-keyboard__text--hidden)").textContent),this.createShortcuts(),"MetaLeft"===this.currElem.code?(this.addActiveClass(),setTimeout(this.removeActiveClass.bind(this),300)):"CapsLock"!==this.currElem.code&&"ShiftLeft"!==this.currElem.code&&"ShiftRight"!==this.currElem.code&&this.addActiveClass()}keyupHandler(s){const e=document.querySelector(`[data-elem-code="${s.code}"`);e&&(this.currElem.elem=e,"CapsLock"!==s.code&&this.removeActiveClass(),"ShiftLeft"===s.code?(this.isShiftL=!1,this.removeActiveClass(),this.changeCase()):"ShiftRight"===s.code&&(this.isShiftR=!1,this.removeActiveClass(),this.changeCase()))}mouseDownHandler(s){if("SPAN"===s.target.tagName){this.currElem.evt=s;const e=s.target.closest("button");this.currElem.elem=e;const a=this.currElem.elem.dataset.elemCode;this.currElem.code=a,this.currElem.charcode=s.target.textContent,this.createShortcuts(),"CapsLock"!==this.currElem.code&&this.addActiveClass(),this.prevElem={...this.currElem},s.preventDefault()}}mouseUpHandler(s){if(this.currElem.evt=s,"SPAN"===s.target.tagName){const e=s.target.closest("button");if(this.currElem.elem=e,this.currElem.elem&&this.currElem.elem.classList.contains("virtual-keyboard__key")){const s=this.currElem.elem.dataset.elemCode;this.currElem.code=s}else this.currElem={...this.prevElem};"CapsLock"!==this.currElem.code&&(this.removeActiveClass(),!0===this.isShiftR&&"ShiftRight"===this.currElem.code&&(this.isShiftR=!1,this.changeCase()),!0===this.isShiftL&&"ShiftLeft"===this.currElem.code&&(this.isShiftL=!1,this.changeCase()))}}createShortcuts(){this.textfield=document.querySelector(".virtual-keyboard__input-field");let s=this.textfield.value;const e=this.textfield.selectionStart,a=function(){e>=0&&e<=s.length?(this.textfield.value=s.slice(0,e)+this.currElem.charcode+s.slice(e,this.textfield.length),this.textfield.selectionStart+=this.currElem.charcode.length,this.textfield.selectionEnd=e+this.currElem.charcode.length):this.textfield.value+=this.currElem.charcode}.bind(this);if(this.hotkeys.includes(this.currElem.code))switch(this.currElem.code){case"CapsLock":this.isCaps&&!this.currElem.evt.repeat?(this.removeActiveClass(),this.isCaps=!1,this.status.case="down"):(this.addActiveClass(),this.isCaps=!0,this.status.case="up"),this.changeCase();break;case"ShiftRight":this.isShiftR&&this.isShiftL||(this.addActiveClass(),this.isShiftR=!0,this.changeCase());break;case"ShiftLeft":this.isShiftL&&this.isShiftR||(this.addActiveClass(),this.isShiftL=!0,this.changeCase());break;case"Backspace":e>=0&&e<=s.length&&(s=s.slice(0,e-1)+s.slice(e,s.length),this.textfield.value=s,this.textfield.selectionStart=e-1,this.textfield.selectionEnd=e-1);break;case"Delete":e>=0&&e<=s.length-1&&(s=s.slice(0,e)+s.slice(e+1,s.length),this.textfield.value=s,this.textfield.selectionStart=e,this.selectionEnd=e);break;case"Enter":this.currElem.charcode="\n",a();break;case"Tab":this.currElem.charcode="    ",a();break;default:console.log("no hotkeys")}else a();this.currElem.evt.ctrlKey&&this.currElem.evt.altKey&&this.changeLanguage()}init(){this.createKeyboardRows(),document.addEventListener("keydown",this.keydownHandler.bind(this)),document.addEventListener("keyup",this.keyupHandler.bind(this)),document.addEventListener("mousedown",this.mouseDownHandler.bind(this)),document.addEventListener("mouseup",this.mouseUpHandler.bind(this))}}!function(){const a=document.querySelector(".page"),c=document.createElement("main");c.className="virtual-keyboard",a.append(c),c.innerHTML='\n        <div class="container">\n            <h1 class="virtual-keyboard__title">RSS Virtual Keyboard</h1>\n            <textarea class="virtual-keyboard__input-field" rows="7" cols="50"></textarea>\n            <div class="virtual-keyboard__keyboard"></div>\n            <p class="virtual-keyboard__description">Keyboard was created in Windows OS</p>\n        </div>\n    ',new e(s[0]).init()}()})();
//# sourceMappingURL=main.js.map